{"version":3,"sources":["components/form/useForm.jsx","components/form/contact-form.jsx"],"names":["useForm","toast","validate","validateEmail","validateMobile","subject","useState","mobile","name","email","text","values","setValues","errors","setErrors","emptyContacts","setEmptyContacts","isSubmitting","setIsSubmitting","submitAndClean","a","axios","post","beUrl","prev","handleChange","e","target","value","v","handleSubmit","preventDefault","err","Object","keys","includes","length","success","error","Button","styled","div","props","theme","filters","buttonBgColor","buttonFgColor","activeBgColor","activeFgColor","mail","test","checkErrors","style","color","ContactForm","gridArea","className","htmlFor","onChange","type","id","placeholder","role","hidden","onClick","disabled","aria-hidden"],"mappings":"4NA+EeA,EA3EC,SAACC,EAAOC,EAAUC,EAAeC,EAAgBC,GAAa,IAAD,EAC/CC,mBAAS,CACnCD,UACAE,OAAQ,GACRC,KAAM,GACNC,MAAO,GACPC,KAAM,KANmE,mBACpEC,EADoE,KAC5DC,EAD4D,OAQ/CN,mBAAS,IARsC,mBAQpEO,EARoE,KAQ5DC,EAR4D,OASjCR,oBAAS,GATwB,mBASpES,EAToE,KASrDC,EATqD,OAUnCV,oBAAS,GAV0B,mBAUpEW,EAVoE,KAUtDC,EAVsD,KA8BrEC,EAAc,uCAAG,sBAAAC,EAAA,sEACfC,IAAMC,KAAN,UAAcC,IAAd,kBAAqCZ,GADtB,OAErBC,GAAU,SAACY,GAET,MAAO,CAAEnB,UAASE,OAAQ,GAAIC,KAAM,GAAIC,MAAO,GAAIC,KAAM,OAJtC,2CAAH,qDAmCpB,MAAO,CACLe,aAtDmB,SAACC,GAAO,IAAD,EACFA,EAAEC,OAAlBnB,EADkB,EAClBA,KAAMoB,EADY,EACZA,MACdhB,GAAU,SAACY,GACT,IAAMK,EAAC,2BACFlB,GADE,kBAEJH,EAAOoB,IASV,MANa,UAATpB,GAA6B,WAATA,GACtBQ,GACGb,EAAc0B,EAAC,SAAezB,EAAeyB,EAAC,SAI5CA,MAyCTC,aA7BmB,SAACJ,GACpBA,EAAEK,iBAEFb,GAAgB,GAChB,IAAMc,EAAM9B,EAASS,GAMrB,GAJAG,EAAUkB,GAEVhB,EAAiBiB,OAAOC,KAAKF,GAAKG,SAAS,gBAEX,IAA5BF,OAAOC,KAAKF,GAAKI,OACnB,IACEjB,IACAD,GAAgB,GAChBjB,EAAMoC,QAAQ,yCACd,SACApC,EAAMqC,MACJ,yEAEFpB,GAAgB,QAIlBA,GAAgB,IAOlBP,SACAE,SACAI,eACAF,kB,eCvEEwB,EAASC,IAAOC,IAAV,2RACU,SAACC,GAAD,OAAWA,EAAMC,MAAMC,QAAQC,iBACnC,SAACH,GAAD,OAAWA,EAAMC,MAAMC,QAAQC,iBACtC,SAACH,GAAD,OAAWA,EAAMC,MAAMC,QAAQE,iBAGlB,SAACJ,GAAD,OAAWA,EAAMC,MAAMC,QAAQG,iBACnC,SAACL,GAAD,OAAWA,EAAMC,MAAMC,QAAQG,iBACtC,SAACL,GAAD,OAAWA,EAAMC,MAAMC,QAAQI,iBAUtC7C,EAAgB,SAAC8C,GAAD,MACpB,uEAAuEC,KACrED,IAGE7C,EAAiB,SAACG,GAAD,MACrB,UAAU2C,KAAK3C,IAAW,aAAa2C,KAAK3C,IAExCL,EAAW,SAACS,GAChB,IAAMqB,EAAM,GAcZ,OAZK7B,EAAcQ,EAAOF,QAA4B,KAAlBE,EAAOJ,SACzCyB,EAAG,YAAkB,mCAGH,KAAhBrB,EAAOH,OACTwB,EAAG,KAAW,iCAGI,KAAhBrB,EAAOD,OACTsB,EAAG,KAAW,kDAGTA,GAGHmB,EAAc,SAACtC,EAAQL,GAC3B,GAAIyB,OAAOC,KAAKrB,GAAQsB,SAAS3B,GAC/B,OAAO,uBAAO4C,MAAO,CAAEC,MAAO,OAAvB,SAAiCxC,EAAOL,MA2HpC8C,UAvHK,SAACZ,GAAW,IAAD,EAQzB1C,EAAQC,IAAOC,EAAUC,EAAeC,EAAgBsC,EAAMrC,SANhEoB,EAF2B,EAE3BA,aACAK,EAH2B,EAG3BA,aACAnB,EAJ2B,EAI3BA,OACAE,EAL2B,EAK3BA,OACAI,EAN2B,EAM3BA,aACAF,EAP2B,EAO3BA,cAGF,OACE,cAAC,IAAD,CAAe4B,MAAOD,EAAMC,MAA5B,SACE,qBAAKS,MAAO,CAAEG,SAAU,eAAxB,SACE,gCACE,uDACA,iCACE,qBAAKC,UAAU,aAAf,SACE,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,MAAf,UACE,uBAAOC,QAAQ,UAAf,qBACA,uBACE7B,MAAOjB,EAAON,QACdqD,SAAUjC,EACVkC,KAAK,OACLnD,KAAK,UACLoD,GAAG,UACHJ,UAAU,oBAGd,sBAAKA,UAAU,MAAf,UACE,uBAAOC,QAAQ,SAAf,sBACA,uBACE7B,MAAOjB,EAAOJ,OACdmD,SAAUjC,EACVoC,YAAY,WACZF,KAAK,OACLnD,KAAK,SACLoD,GAAG,SACHJ,UAAU,yBAMlB,sBAAKA,UAAU,WAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,uBAAOC,QAAQ,OAAf,kBACA,uBACE7B,MAAOjB,EAAOH,KACdkD,SAAUjC,EACVkC,KAAK,OACLH,UAAU,eACVhD,KAAK,OACLqD,YAAY,SAEbV,EAAYtC,EAAQ,WAEvB,sBAAK2C,UAAU,sBAAf,UACE,uBAAOC,QAAQ,QAAf,mBACA,uBACE7B,MAAOjB,EAAOF,MACdiD,SAAUjC,EACVkC,KAAK,QACLH,UAAU,eACVhD,KAAK,QACLqD,YAAY,gBAKlB,qBAAKL,UAAU,WAAf,SACE,sBAAKA,UAAU,oBAAf,UACE,uBAAOC,QAAQ,OAAf,sBACA,0BACE7B,MAAOjB,EAAOD,KACdgD,SAAUjC,EACVkC,KAAK,OACLH,UAAU,eACVhD,KAAK,OACLqD,YAAY,gCAEbV,EAAYtC,EAAQ,QACrB,qBACE2C,UAAU,qBACVM,KAAK,QACLC,QAAShD,EAHX,uIAWJ,qBAAKyC,UAAU,eACf,cAACjB,EAAD,CACEiB,UAAS,+BACPvC,EAAe,WAAa,IAE9B+C,QAASlC,EACTmC,UAAU,EALZ,SAOGhD,EACC,sBACEuC,UAAU,mCACVM,KAAK,SACLI,cAAY,SAGd,WAGHf,EAAYtC,EAAQ","file":"static/js/9.b57160c6.chunk.js","sourcesContent":["import { useState } from \"react\";\nimport { beUrl } from \"../../config\";\nimport axios from \"axios\";\n\nconst useForm = (toast, validate, validateEmail, validateMobile, subject) => {\n  const [values, setValues] = useState({\n    subject,\n    mobile: \"\",\n    name: \"\",\n    email: \"\",\n    text: \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const [emptyContacts, setEmptyContacts] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setValues((prev) => {\n      const v = {\n        ...values,\n        [name]: value,\n      };\n\n      if (name === \"email\" || name === \"mobile\") {\n        setEmptyContacts(\n          !validateEmail(v[\"email\"]) && !validateMobile(v[\"mobile\"])\n        );\n      }\n\n      return v;\n    });\n  };\n\n  const submitAndClean = async () => {\n    await axios.post(`${beUrl}/messages/send`, values);\n    setValues((prev) => {\n      //await axios.post(`${beUrl}/messages/send`, prev);\n      return { subject, mobile: \"\", name: \"\", email: \"\", text: \"\" };\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    setIsSubmitting(true);\n    const err = validate(values);\n\n    setErrors(err);\n\n    setEmptyContacts(Object.keys(err).includes(\"no_contacts\"));\n\n    if (Object.keys(err).length === 0) {\n      try {\n        submitAndClean();\n        setIsSubmitting(false);\n        toast.success(\"A sua mensagem foi enviada. Obrigado!\");\n      } catch {\n        toast.error(\n          \"Ocorreu um erro ao enviar a sua mensagem. Por favor tente mais tarde.\"\n        );\n        setIsSubmitting(false);\n      }\n    } else {\n      //display errors\n      setIsSubmitting(false);\n    }\n  };\n\n  return {\n    handleChange,\n    handleSubmit,\n    values,\n    errors,\n    isSubmitting,\n    emptyContacts,\n  };\n};\n\nexport default useForm;\n","import styled, { ThemeProvider } from \"styled-components\";\nimport useForm from \"./useForm\";\nimport { toast } from \"../common/helper\";\n\nconst Button = styled.div`\n  background-color: ${(props) => props.theme.filters.buttonBgColor};\n  border-color: ${(props) => props.theme.filters.buttonBgColor};\n  color: ${(props) => props.theme.filters.buttonFgColor};\n\n  &:hover {\n    background-color: ${(props) => props.theme.filters.activeBgColor};\n    border-color: ${(props) => props.theme.filters.activeBgColor};\n    color: ${(props) => props.theme.filters.activeFgColor};\n  }\n\n  &.disabled {\n    background-color: gray;\n    border-color: gray;\n    cursor: not-allowed;\n  }\n`;\n\nconst validateEmail = (mail) =>\n  /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(\n    mail\n  );\n\nconst validateMobile = (mobile) =>\n  /^\\d{9}$/.test(mobile) || /^\\+\\d{12}$/.test(mobile);\n\nconst validate = (values) => {\n  const err = {};\n\n  if (!validateEmail(values.email) && values.mobile === \"\") {\n    err[\"no_contacts\"] = \"Nenhum contacto foi preenchido.\";\n  }\n\n  if (values.name === \"\") {\n    err[\"name\"] = \"Por favor, indique o seu nome\";\n  }\n\n  if (values.text === \"\") {\n    err[\"text\"] = \"Coloque aqui as suas dúvidas ou questões\";\n  }\n\n  return err;\n};\n\nconst checkErrors = (errors, name) => {\n  if (Object.keys(errors).includes(name)) {\n    return <small style={{ color: \"red\" }}>{errors[name]}</small>;\n  }\n};\n\nconst ContactForm = (props) => {\n  const {\n    handleChange,\n    handleSubmit,\n    values,\n    errors,\n    isSubmitting,\n    emptyContacts,\n  } = useForm(toast, validate, validateEmail, validateMobile, props.subject);\n\n  return (\n    <ThemeProvider theme={props.theme}>\n      <div style={{ gridArea: \"contactForm\" }}>\n        <div>\n          <h4>Tem alguma dúvida?</h4>\n          <form>\n            <div className=\"form-group\">\n              <div className=\"form-row\">\n                <div className=\"col\">\n                  <label htmlFor=\"subject\">Assunto</label>\n                  <input\n                    value={values.subject}\n                    onChange={handleChange}\n                    type=\"text\"\n                    name=\"subject\"\n                    id=\"subject\"\n                    className=\"form-control\"\n                  />\n                </div>\n                <div className=\"col\">\n                  <label htmlFor=\"mobile\">Contacto</label>\n                  <input\n                    value={values.mobile}\n                    onChange={handleChange}\n                    placeholder=\"Contacto\"\n                    type=\"text\"\n                    name=\"mobile\"\n                    id=\"mobile\"\n                    className=\"form-control\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"form-group col-md-6\">\n                <label htmlFor=\"name\">Nome</label>\n                <input\n                  value={values.name}\n                  onChange={handleChange}\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"name\"\n                  placeholder=\"Nome\"\n                />\n                {checkErrors(errors, \"name\")}\n              </div>\n              <div className=\"form-group col-md-6\">\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  value={values.email}\n                  onChange={handleChange}\n                  type=\"email\"\n                  className=\"form-control\"\n                  name=\"email\"\n                  placeholder=\"Email\"\n                />\n              </div>\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"form-group col-12\">\n                <label htmlFor=\"text\">Mensagem</label>\n                <textarea\n                  value={values.text}\n                  onChange={handleChange}\n                  type=\"text\"\n                  className=\"form-control\"\n                  name=\"text\"\n                  placeholder=\"Pedido de informações\"\n                ></textarea>\n                {checkErrors(errors, \"text\")}\n                <div\n                  className=\"alert alert-danger\"\n                  role=\"alert\"\n                  hidden={!emptyContacts}\n                >\n                  Se não preencher um contacto de e-mail ou móvel válido, não\n                  será possível contactá-lo de volta.\n                </div>\n              </div>\n            </div>\n\n            <div className=\"form-group\"></div>\n            <Button\n              className={`btn btn-primary mb-5 ${\n                isSubmitting ? \"disabled\" : \"\"\n              }`}\n              onClick={handleSubmit}\n              disabled={true}\n            >\n              {isSubmitting ? (\n                <span\n                  className=\"spinner-border spinner-border-sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                ></span>\n              ) : (\n                \"Enviar\"\n              )}\n            </Button>\n            {checkErrors(errors, \"server\")}\n          </form>\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default ContactForm;\n"],"sourceRoot":""}
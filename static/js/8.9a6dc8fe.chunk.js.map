{"version":3,"sources":["components/filter.jsx"],"names":["FilterTitle","styled","h4","props","theme","primaryText","Button","button","buttonBgColor","buttonFgColor","activeBgColor","activeFgColor","badgeBgColor","badgeFgColor","ToggleWithTooltip","span","Filter","state","a","axios","get","beUrl","cars","data","brands","forEach","car","b","attributes","brand","value","includes","push","_","sortBy","this","setState","allBrands","filter","c","length","sold","showSold","selectedBrands","className","onClick","toggleVisibility","expanded","style","margin","onDisableAvailableFilter","onClickAvailable","countSold","onClickBrand","map","countBrand","Component"],"mappings":"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","file":"static/js/8.9a6dc8fe.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport _ from \"lodash\";\nimport styled, { ThemeProvider } from \"styled-components\";\nimport axios from \"axios\";\nimport LoadingSpinner, { LoadingContainer } from \"./common/loading\";\nimport { beUrl } from \"../config\";\n\nconst FilterTitle = styled.h4`\n  color: ${(props) => props.theme.primaryText};\n`;\n\nconst Button = styled.button`\n  background-color: ${(props) => props.theme.buttonBgColor};\n  color: ${(props) => props.theme.buttonFgColor};\n\n  &.active {\n    background-color: ${(props) => props.theme.activeBgColor};\n    color: ${(props) => props.theme.activeFgColor};\n    border-color: ${(props) => props.theme.activeBgColor};\n  }\n\n  & span {\n    background-color: ${(props) => props.theme.badgeBgColor};\n    color: ${(props) => props.theme.badgeFgColor};\n    margin-left: 10px;\n  }\n`;\n\nconst ToggleWithTooltip = styled.span`\n  cursor: pointer;\n  margin: 0 10px;\n\n  & .tooltiptext {\n    visibility: hidden;\n    opacity: 0;\n    transition: 0.5s ease-in;\n    background-color: black;\n    color: #fff;\n    text-align: center;\n    border-radius: 6px;\n    padding: 5px;\n    font-size: 0.9em;\n\n    position: absolute;\n    margin-left: 10px;\n    z-index: 999;\n  }\n\n  &:hover .tooltiptext {\n    visibility: visible;\n    opacity: 1;\n    transition: 0.5s ease-in;\n  }\n\n  & .word {\n    color: ${(props) => props.theme.badgeBgColor};\n  }\n`;\n\nclass Filter extends Component {\n  state = {};\n\n  async componentDidMount() {\n    let { data: cars } = await axios.get(`${beUrl}/cars`);\n\n    let brands = [];\n    cars.forEach((car) => {\n      const b = car.attributes.brand.value;\n      if (!brands.includes(b)) {\n        brands.push(b);\n      }\n    });\n    brands = _.sortBy(brands);\n\n    this.setState({ allBrands: brands, cars });\n  }\n\n  getUniqueBrands() {\n    const { cars } = this.state;\n    let brands = [];\n    for (let car of cars) {\n      let b = car.attributes.brand.value;\n      if (!brands.includes(b)) {\n        brands.push(b);\n      }\n    }\n\n    brands = _.sortBy(brands);\n    return brands;\n  }\n\n  countBrand(brand) {\n    const { cars } = this.state;\n    return cars.filter((c) => c.attributes.brand.value === brand).length;\n  }\n\n  countSold() {\n    const { cars } = this.state;\n    return cars.filter((c) => c.sold).length;\n  }\n\n  render() {\n    const { showSold, selectedBrands } = this.props;\n    const { allBrands, cars } = this.state;\n\n    if (!allBrands || !cars) {\n      return (\n        <LoadingContainer>\n          <LoadingSpinner></LoadingSpinner>\n        </LoadingContainer>\n      );\n    }\n\n    return (\n      <ThemeProvider theme={this.props.theme}>\n        <FilterTitle className=\"title1\">\n          Filtros{\" \"}\n          <ToggleWithTooltip onClick={this.props.toggleVisibility}>\n            <i\n              className={`fas ${\n                this.props.expanded ? \"fa-chevron-up\" : \"fa-chevron-down\"\n              }`}\n            ></i>\n            <span className=\"tooltiptext\">\n              Clique para\n              <span className=\"word\">\n                {this.props.expanded ? \" esconder \" : \" mostrar \"}\n              </span>{\" \"}\n              os filtros\n            </span>\n          </ToggleWithTooltip>\n        </FilterTitle>{\" \"}\n        {this.props.expanded ? (\n          <>\n            {\" \"}\n            <div className=\"list-group filter1\" style={{ margin: \"15px 0\" }}>\n              <Button\n                className={`list-group-item d-flex justify-content-between align-items-center ${\n                  showSold ? \"active\" : \"\"\n                }`}\n                onClick={() => this.props.onDisableAvailableFilter()}\n              >\n                Todos\n                <span className=\"badge badge-primary badge-pill\">\n                  {cars.length}\n                </span>\n              </Button>\n\n              <Button\n                className={`list-group-item d-flex justify-content-between align-items-center ${\n                  !showSold ? \"active\" : \"\"\n                }`}\n                onClick={() => this.props.onClickAvailable()}\n              >\n                Dispon√≠veis\n                <span className=\"badge badge-primary badge-pill\">\n                  {cars.length - this.countSold()}\n                </span>\n              </Button>\n            </div>\n            <FilterTitle className=\"title2\">Marcas</FilterTitle>\n            <div className=\"list-group filter2\" style={{ margin: \"15px 0\" }}>\n              <Button\n                className={`list-group-item d-flex justify-content-between align-items-center ${\n                  selectedBrands.length === 0 ? \"active\" : \"\"\n                }`}\n                onClick={() => this.props.onClickBrand(\"all\")}\n              >\n                Todas\n                <span className=\"badge badge-primary badge-pill\">\n                  {cars.length}\n                </span>\n              </Button>\n              {allBrands.map((brand) => {\n                return (\n                  <Button\n                    key={brand}\n                    className={`list-group-item d-flex justify-content-between align-items-center ${\n                      selectedBrands.includes(brand) ? \"active\" : \"\"\n                    }`}\n                    onClick={() => this.props.onClickBrand(brand)}\n                  >\n                    {brand}\n                    <span className=\"badge badge-primary badge-pill\">\n                      {this.countBrand(brand)}\n                    </span>\n                  </Button>\n                );\n              })}\n            </div>{\" \"}\n          </>\n        ) : (\n          \"\"\n        )}\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default Filter;\n"],"sourceRoot":""}